function setup(){hpadding=windowWidth-windowWidth%scl,vpadding=windowHeight-windowHeight%scl,createCanvas(hpadding,vpadding);var e={apiKey:"AIzaSyDS6UXulI-e_xed3iQx1HWUk-6mF6CKw4A",authDomain:"snekjs-932e0.firebaseapp.com",databaseURL:"https://snekjs-932e0.firebaseio.com",storageBucket:"snekjs-932e0.appspot.com",messagingSenderId:"600064049611"};firebase.initializeApp(e),database=firebase.database(),vex.dialog.prompt({message:"Enter your name:",callback:function(e){e?(name=e,console.log("Successful"),modelout=!0):console.log("Error.")}});var a=database.ref("scores");a.on("value",gotData,errData),snake=new Snake,food=new Food,frameRate(level)}function draw(){if(background(50),snake.update(),snake.show(),snake.crash(),food.show(),mutex=!1,snake.eat(food)){food.pickLocation();for(var e=createVector(food.x,food.y),a=0;a<snake.tail.length;a++){var n=createVector(snake.tail[a].x,snake.tail[a].y),s=dist(e.x,e.y,n.x,n.y);3>s&&(console.log("Oops"),food.pickLocation())}nextLevel(),frameRate(level)}snake.gameOver&&(scoreSend(snake.score),level=10,frameRate(level),snake.gameOver=!1)}function keyPressed(){modelout&&!mutex&&(mutex=!0,keyCode==UP_ARROW||87==keyCode?snake.dir(0,-1):keyCode==DOWN_ARROW||83==keyCode?snake.dir(0,1):keyCode==LEFT_ARROW||65==keyCode?snake.dir(-1,0):(keyCode==RIGHT_ARROW||68==keyCode)&&snake.dir(1,0))}function nextLevel(){0==count?(frameRate(level++),count=5):count--}function scoreSend(e){var a={name:name,score:e},n=database.ref("scores");n.push(a)}function gotData(e){for(var a,n=e.val(),s=Object.keys(n),t=n[s[0]].score,o=0;o<s.length;o++){var r=s[o],i=n[r].score;i>t&&(t=i,a=n[r].name)}var d=document.getElementsByClassName("user-name")[0],c=document.getElementsByClassName("user-score")[0],l=document.getElementsByClassName("snakes-killed-number")[0];d.innerHTML=a,c.innerHTML=t,l.innerHTML=s.length}function errData(e){console.log("Error"),console.log(e)}function getHighestScore(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(e.responseText),n=document.getElementsByClassName("user-name")[0],s=document.getElementsByClassName("user-score")[0];a&&a.length>0&&a[0]&&(n.innerHTML=a[0].user,s.innerHTML=a[0].score)}},e.open("GET","http:sbodiwala:3000/api/getHighestScore",!0),e.send()}function setNewHighScore(e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(a.responseText),n=document.getElementsByClassName("user-name")[0],s=document.getElementsByClassName("user-score")[0];e&&e.length>0&&e[0]&&(n.innerHTML=e[0].user,s.innerHTML=e[0].score)}},a.open("POST","http:sbodiwala:3000/api/addHighScore",!0),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.send(JSON.stringify({user:name,score:e})),getHighestScore()}var snake,scl=40,food,joystick,name,level=10,count=5,database,modelout=!1,mutex=!1,hpadding,vpadding;